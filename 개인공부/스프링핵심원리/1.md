## 스프링의 핵심 가치
- 객체 지향 프로그래밍
- 옛날 옛적에...
- 순수한 자바코드로 예제 어플리케이션을 만들것이다.
- 예제를 보면서 객체지향 코드를 적용해본다.
- 자연스럽게 좋은 객체지향의 원리, IOC , DI에 대해서 이해한다.
- 스프링 컨테이너가 왜 필요한지 알 수 있다.

## 강의 목표
- 단순 레퍼런스 문서 설명하는 문서가 아니다
- Why Spring ?
- 이유와 설명
- 스프링 기본 기능 학습
- 스프링 본질 깊은 이해
- 객체 지향 설계를 고민 하는 개발자로 성장


## 스프링 핵심 원리 - 중급편
- 기본편
    - 객체 지향 설계와 스프링의 핵심 원리
    - 스프링을 사용할 때 필수로 알아야 하는 핵심기능
- 중급편
    - 기본편에서 다루지 않은 컨테이너 확장 포인, AOP 동작원리, 기타 기능들
    - 스프링의 난이도 있는 내용들을 주로 다루는 심화과정
    
## 이야기
- 자바 진영의 추운 겨울과 스프링의 탄생

- 옛날 옛적에 2000년 초반
- 자바당 정파 기술 EJB (Enterprise Java Beans) 오픈소스들이 사파의 기술이라 했다.
- ADMIRE THE BEAN 자바 진영의 표준기술이다. 금융권 아키텍트들이 사용을 많이했다.
- EJB 참쉽죠잉, 기술영업을 많이 했다. 금융권에서는 자바 진영에서의 표준 기술이라고 했다.
- IBM, WEB LOGIC등 서버같은걸을 팔았다. 영업시 중요한건 자바진영의 표준기술이라 한다.
- 레퍼런스가 많다. 기술영업이 잘 돼었다. 오픈소스같은걸 금융권에서 쓰면 불안하다.
- 당시에 컨테이너 기술이라던가, 설정에 의한 트랜잭션 관리, 분산 기술 Service Dao등을 서버 분산해놓는것.
- 분산에 대한 기술이 지원이 되었다. 이론적인 부분이 좋았다.
- 엔티티 빈이라는 기술이 있었는데, JPA는 ORM 기술이다. 쿼리 안쓰고, EJB는 Entity Bean이라는 ORM기술을 넣고 있다.
- 근데 비쌋다. 수천만원이였다.
- 지금은 무료다.
- EJB지옥 , 진짜 어렵고 복잡하고 느리다. 이론적으로만 좋았다. 개발자들은 단순하고 편해야 한다.
- 복잡하고 어려운데 느리다. EJB가 원하는 인터페이스를 구현 라이프사이클 모르겠따. 분산기술을 그 당시에는 네트워크로 통신해야하니까
- 지옥이였다. 그당시 컨테이너 띄우는데 오래 걸렸다. EJB의존적 너무 구리다.
- POJO가 들어온다. 오래된 방식의 자바 오브젝트를 쓰자고 나왔다. 그 당시에 EJB가 제공하는 엔티티 빈은 기술 수준이 나왔다.
- 조인을 하면 안된다. 여기에서 두명의 개발자가 있었다.

- 스프링
    - EJB 컨테이너 대체
    - 단순함의 승리
    - 현재 사실상 표준 기
- 하이버네이트
    - EJB 엔티티빈 기술을 대체
    - JPA(Java Persistence API) 새로운 표준 정의

- EJB엔티티빈 -> 등장 -> 하이버네이트 -> 자바표준 -> JPA

- 표준인터페이스 JPA
    - JPA 구현체들
    - 하이버네이트
    - EclipseLink
    - 기타...

- 하이버 네이트 가지고 정제해서 표준을 만들었다.
- 여러사람이 논의 한다. 정제하고 덜어낸다. 깔끔하게 나온다.
- 실무 개발자들이 좋아하는 실용성과 표준이 가져오는 안정성이 JPA가 나왔다.

## 스프링의 역사
- 지금 시대의 자바 기술은 스프링과 JPA가 중요하다.

- 스프링 역사
    - 전설의 시작
    - 2002년 로드존슨 책 출간
    - EJB의 문제점 지적
    - EJB없이도 충분히 고품질의 확장 가능한 애플리케이션을 개발할 수 있음을 보여주고, 30000 라인이상의 기반 기술을 예제 코드로 선보임
    - 여기에 지금의 스프링 핵심개념과 기반 코드가 들어가 있음.
    - BeanFactory ,  ApplicationContext, POJO , 제어의 역전, 의존관계 주입
    - 책이 유명해지고, 개발자들이 책의 예제 코드를 프로젝트에 사용
    - 책 출간 직후 유겐휠러 얀 카로프가 로드 존슨에게 오픈소스 프로젝트를 제안
    - 스프링의 핵심 코드의 상당수는 유겐 휠러가 지금도 개발
    - 스프링 이름은 전통적인 J2EE(EJB)라는 겨울을 넘어 새로운 시작이라는 뜻으로 지음.

- 강의의 시작은 처음으로 간다.

- 릴리즈
    - 2003년 스프링 프레임웤 1.0 출시 - XML
    - 2006년 스프링 프레임웤 2.0 출시 - XML 편의 기능 지원
    - 2009년 스프링 프레임웤 3.0 출시 - 자바 코드로 설정
    - 2013년 스프링 프레임웤 4.0 출시 - 자바8
    - 2014년 스프링 부트 1.0 출시
    - 2017년 스프링 프레임웤 5.0 스프링 부트 2.0 출시 - 리엑티브 프로그래밍 지원 (자바에서도 논블로킹 비동기를 통해서 개발할수있다.)
    - 2020년 9월 현재 스프링 프레임웤 5.2.x , 스프링 부트 2.3.x

## 스프링이란?
### 스프링 생태계

- 스프링은 특정한 하나가 아니라 기술의 모음이다.
    - 스프링 프레임웤
    - 스프링 부트
    - 스프링 데이터
        - NOSQL RDBS CRUD는 다 비슷하다.
        - JPA를 많이 씀
    - 스프링 세션
        - 세션기능을 편리하게 사용한다.
    - 스프링 시큐리티
        - 보안에 관련한것.
    - 스프링 Rest Docs
        - API문서화 편하게 하는것
    - 스프링 배치
        - 애플리케이션이라고 생각하면, 실무를 안해본사람은 API만들고 화면을 만든다고 생각한데,
        현업에서는 1000만건 등을 바로 하기는 힘드니까 잘라서 쓴다.
    - 스프링 클라우드
        - 클라우드에 관한 기술
    - 기타 등등..
    
- 스프링 프레임웤
    - 핵심 기술: 스프링 DI 컨테이너 , AOP , 이벤트 , 기타 가장 라이브러리들이 다 사용한다.
    - WEB 기술 : 스프링 MVC , 스프링 WebFlux
    - 데이터 접근 기술 : 트랜잭션 ,JDBC, ORM지원, XL 지원
    - 기술 통합: 캐시, 이메일 ,원격접근, 스케줄링
    - 테스트 : 스프링 기반 테스트 지원
    - 언어 : 
- 스프링 부트
    - 스프링을 편리하게 사용할 수 있도록 지원한다. 최근에는 기본으로 사용
        - 빌드 -> 톰캣서버 설치 -> 스프링 빌드 된걸 놓고 띄우고 복잡하다.
        - 빌드하고 서버 띄우는것까지 스프링부트가 지원한다.
    - 단독으로 실행할 수 있는 스프링 애플리케이션을 쉽게 생성한다.
    - 톰캣과 같은 웹 서버를 내장해서 별도의 웹서버를 설치하지 않아도 된다.
    - 손쉬운 빌드 구성을 위한 starter 종속성 제공 
        - 예전에는 스프링 프레임웤 쓸려면 이라이브러리를 계쏙 넣는다.
        - 지금은 여러가지 starter가 여러개를 땡기면 나머지 라이브러리가 땡겨진다.
    - 스프링과 3rd parth(외부) 라이브러리 자동 구성
        - 궁합이라 해야하나 스프링 3.1이야 JSON라이브러리가 안맞는대
        - 스프링 부트가 5.1에서는 외부 라이브러리들이 버전을 챙겨준다.
    - 매트릭, 상태 확인, 외부 구성 같은 프로 덕션 준비 기능 제공
        - 운영환경에서 모니터링이 중요하다.
        - 스프링 부트가 기본적으로 제공한다.
    - 관례에 의한 간결한 설정
        - 스프링 프레임웤만 쓰면 설정이 힘들다.
        - 스프링 부트는 디폴트가 정해져있고 필요할때만 커스텀 하면 된다.
    - 오해하는 부분이 있따. 스프링 부트에대해서
        - 스프링 부트는 스프링 프레임웤이랑 별도로 사용하는게 아니다.
        - 스프링 여러 라이브러리를 중간에서 사용하는 기능을 제공,
        - 껍데기 기능만 제공한다. 스프링 부트는 스프링 프레임웤을 사용한다.
        - 자동으로 스프링 프레임웤을 땡긴다.
### 스프링 단어?
- 스프링이라는 단어는 문맥에 따라 다르게 사용된다.
    - 스프링 DI 컨테이너 기술
    - 스프링 프레임워크
    - 스프링 부트, 스프링 프레임워크 등을 모두 포함한 스프링 생태계

## 스프링은 왜 만들었나요?
- 핵심개념
    - 이 기술을 왜 만들었는가?
    
    - 이 기술의 핵심 컨셉은?
    
- 핵심 컨셉은 단순하다. 핵심컨셉이 너무 좋으면 기술이 붙으면서 생테계가 진화한다.
- 매우 복잡하고 커보이지만, 핵심 코드에 왜 열광을 해서 오픈소스를 했는지 왜가 중요하다.


## 스프링의 핵심 개념? 컨셉?
- 웹 애플리케이션 만들고, DB 접근 편리하게 해주는 기술?
- 전자정부 프레임워크?
- 웹 서버도 자동으로 띄워주고?
- 마이크로 서비스?

## 스프링의 진짜 핵심
- 스프링은 자바 언어 기반의 프레임워크
- 자바 언어의 가장 큰 특징 -객체지향언어
- 스프링은 객체 지향 언어가 가진 강력한 특징을 살려내는 프레임워크
- 스프링은 좋은 객체 지향 애플리케이션을 개발할 수 있게 도와주는 프레임워크

- EJB의 의존해서 종속되면 스타일로 개발할 수 밖에없다.
- 그래서 POJO가 나왔다.



## 객체 지향 특징
- 추상화
- 캡슐화
- 상속
- 다형성

- 객체지향프로그래밍은 컴퓨터 프로그램을 명령어의 목록으로 보는 시각에서 벗어나 여러개의 독립된 단위 객체들의 모임으로 파악하고자 하는것이다.
 각각의 객체는 메시지를 주고받고 데이터를 처리할수있다. 협력
- 객체지향 프로그래밍은 프로그램을 유연하고 변경이 용이하게 만들기 때문에 대규모 소프트웨어프로그램에 유용하다.

## 유연하고 변경이 용이?
- 레고 블럭 조립하듯이
- 키보드, 마우스 갈아 끼우듯이
- 컴퓨터 부품 갈아 끼우듯이
- 컴포넌트를 쉽고 유연하게 변경하면서 개발할 수 있는 방법
- 궁극의 유연함 궁극의 변화가 핵심

## 다형성(Polymorphism)
- 다형성의 실세계 비유
    - 실세계와 객체 지향을 1:1로 매칭X
    - 그래도 실세계의 비유로 이해하기에는 좋음
    - 역할(인터페이스)과 구현(인터페이스를 구현한 객체)으로 세상을 구분
    
- 운전자 - 자동차
    - 운전자 역할
    - 자동차 역할
    - K3
    - 아반떼
    - 테슬라 모델 3
    - 자동차 구현
- 운전자는 K3를 아반떼로 바꿔도 운전할 수 있다.
- 자동차가 바껴도 운전자 한테 영향을 안준다.
- 유연하고 변경 용이하다. 내가 자동차 역할을 바꿔도 운전자는 운전할 수 있다.
- 내가 테슬라를 산다해도 다른 운전면허를 따야되는건 아니다.
- 비행기정도면 다르게 따야하지만..
- 자동차역할을 인터페이스를 따라서 자동차를 구현
- 운전자는 자동차 인터페이스만 알고 있다. 역할만 의존한다.
- 자동차라는 역할을 만들고 구현을 분리한것은 사실은 운전자를 위해서 했다.
- 운전자를 클라이언트는 자동차 내부구조를 몰라도 된다.
- 구현 얘들이 내부적으로 바껴도 자동차 역할만 고정시키면 운전자한테 영향을 안준다.
- 아반떼를 테슬라 모델3로 바꿔도 운전자는 그대로이다.
- 자동차 세상을 무한히 확장가능하다.
- 세상을 바꾸지 않아도 된다. 
- 클라이언트에 영향을 주지않고 새로운 기능을 넣을수 있다.
- 역할가 구현을 나눴기 때문

- 공연무대
    - 로미오와 줄리엣 공연
    
    - 로미오역할 -> 줄리엣 역할
        - 장동건
        - 원빈
            - 김태희
            - 송혜교
- 배우는 대체가 가능해야한다. 공연은 되어야 한다.
- 역할과 구현을 나눴기 때문에 변경가능한 대책이 생긴다.
- 로미오역할을 하는사람은 줄리엣 역할을 누가 하든 몰라도 된다.
- 대본만 따르면 된다. 누가하든 상관없다.
- 로미오 클라이언트 줄리엣 서버
- 서버가 바뀌어도 클라이언트는 변경이 안해도된다.

## 다형성의 실세계 비유
- 운전자 - 자동차
- 공연 무대
- 키보드 , 마우스 , 세상으 표준 인터페이스들
- 정렬 알고리즘
- 할인 정책 로직

## 역할과 구현을 분리
- 역할과 구현으로 구분하면 세상이단순해지고, 유연해지며, 변경도 편리해진다.
- 장점
    - 클라이언트는 대상의 역할(인터페이스)만 알면된다.
    - 클라이언트는 구현 대상의 내부 구조를 몰라도 된다.
    - 클라이언트는 구현 대상의 내부 구조가 변경되어도 영향을 받지 않는다.
    - 클라이언트는 구현 대상 자체를 변경해도 영향을 받지 않는다.

- 자바언어
    - 자바 언어의 다형성을 활용
        - 역할 = 인터페이스
        - 구현 = 인터페이스를 구현한 클래스, 구현 객체
    - 객체를 설계할 때 역할과 구현을 명확히 분리
    - 객체 설계시 역할(인터페이스)를 먼저 부여하고, 그 역할을 수행하는 구현 객체 만들기
        - 일반 상속도 가능하지만 인터페이스를 쓰자 다중상속 개념
 
- 객체의 협력이라는 관계부터 생각
    - 혼자 있는 객체는 없다.
        - 오해하는것중에 하나가 부모가 있고 구현한거고 클라이언트가 없다.
        - 중요한것은 클라이언트
        - 클라이언트는 요청하는 사람 서버는 응답하는 사람
    - 클라이언트: 요청, 서버: 응답
    - 수만은 객체 클라이언트와 객체 서버는 서로 협력 관계를 가진다.
        - 서버끼리 시스템끼리 통신가능
 
- 클라이언트 -> 서버
- 클라이언트
    - 서버+ 클라이언트
        - 서버
        - 서버

- 자바 언어의 다형성
    - 오버라이딩을 떠올려보자
    - 오버라이딩은 자바 기본 문법
    - 오버라이딩 된 메서드가 실행
        - 그림에서 오른쪽에 멤버 서비스가 save호출 interface MemberRepository
    - 다형성으로 인터페이스를 구현한 객체를 실행 시점에 유연하게 변경할 수있다.
    - 물론 클래스 상속 관계도 다형성, 오버라이딩 적용 가능
   
- 클라이언트 -> MemberRepository를 의존한다.
    - 내가 쟤를 알고있다.
- 멤버리포지토리에다가 메모리 멤버리파지토리를 할당할수 있따요.

- 부모 타입으로 다 받을수 있다.
- 부모는 마음을 넓기때문에 자식들을 다 품을수 있다.
- 자식은 부모마음을 모르기 때문에 대입할 수 없다.
```java
public class MemberService{
    private MemberRepository memberRepository =  new MemoryMemberRepository();
}
```
```java
public class MemberService{
    //private MemberRepository memberRepository = new MemoryMemberRepository();
    private MemberRepository memberRepository = new JdbcMemberRepository();
}

```

- 클라이언트 -> 서버1
- 클라이언트 -> 서버2


- 다형성의 본질
    - 인터페이스를 구현한 객체 인스턴스를 실행 시점에 유연하게 변경할 수 있다.
    - 다형성의 본질을 이해하려면 협력이라는 객체 사이의 관계에서 시작해야한다.
    - 클라이언트를 변경하지 않고, 서버의 구현 기능을 유연하게 변경할 수 있다.

- 역할과 구현을 분리
-정리 
    - 실세계의 역할과 구현이라는 편리한 컨셉을 다형성을 통해 객체 세상으로 가져올 수 있따.
    - 유연하고 변경이 용이
        - 어떤 차가 나와도 탈수 있다.
    - 확장 가능한 설계
    - 클라이언트에 영향을 주지 않는 변경 가능
    - 인터페이스를 안정적으로 잘 설계 하는것이 중요하다.
- 한계
    - 역할(인터페이스) 자체가 변하면, 클라이언트, 서버 모두에 큰 변경이 발생한다.
    - 자동차를 비행기로 변경해야 한다면?
    - 대본 자체가 변경된다면?
        - 대본 쓴사람은 다 바꿔야한다.
    - USB인터페이스가 변경된다면?
    - 인터페이스를 안정적으로 잘 설계하는 것이 중요.

- 실제 개발할때는 앱, 웹 을 독립해서 쓴다. 서버 서버끼리 설계할때도
- API설계를 안정적으로 설계하는게 중요하다. 인터페이스가 안흔들리게

## 스프링과 객체 지향
- 다형성이 가장 중요하다!
    - 객체지향의 개념에서 다형성이 꽃이다.
- 스프링은 다형성을 극대화 해서 이용할 수 있게 도와준다.
- 스프링에서 이야기하는 제어의 역전(IoC) , 의존관계 주입(DI)은 다형성을 활용해서 역활과 구현을 편리하게 다룰수 있도록 지원한다.
- 스프링을 사용하면 마치 레고 블럭 조립하듯이! , 공연 무대의 배우를 선택하듯이! 구현을 편리하게 변경할 수 있다.

- 스프링과 객체지향 설계를 잘할려면 SOLID 좋은 객체지향 설계 원칙을 잘 알아야한다.

 