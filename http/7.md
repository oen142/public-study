# 웹을 안전하게 하는 HTTPS

- HTTP의 약점
    - 평문이기 때문에 도청이 가능하다.
    - 통신 상대를 확인하지 않기 때문에 위장이 가능하다.
    - 완정성을 증명할 수 없기 때문에 변조가 가능하다.
- HTTP+암호화+인증+완전성 보호 = HTTPS
- HTTP에 암호화와 인증과 완정성 보호를 더한 HTTPS
- HTTP는 SSL의 껍질을 덮어쓴 HTTP
- 상호간에 키를 교환하는 공개키 암호화 방식
- 공개키가 정확한지 아닌지를 증명하는 증명서
- 안전한 통신을 하는 HTTPS의 구조



## HTTP의 약점

- 평문(암호화를 하지 않음) 통신이기 때문에 도청이 가능하다.
- 통신 상대를 확인하지 않기 때문에 위장이 가능하다.
- 완정성을 증명할 수 없기 때문에 변조가 가능하다.

HTTP를 사용한 리퀘스트나 리스폰스 통신 내용은 HTTP 자신을 암호화 하는 기능은 없다.
그래서 통신 전체가 암호화 되지는 않는다. 그렇기에 평문으로 보낸다.

- TCP/IP는 도청이 가능한 네트워크다.
    - 인터넷은 전 세계를 경유하는 네트워크로 되어 있다.
    - 어느 서버와 클라이언트가 통신을 할때 통신 경로 상에 있는 네트워크 기기나 케이블이나 컴퓨터 등을 전부 자기 자신이 소유하고 있을수는 없다.
    - 암호화 통신은 메시지 속의 의미는 알 수는 없다.
    - 암호화된 메시지 자체는 엿볼 수 있다.
- 암호화로 도청을 피해야한다.
    - 통신 암호화
        - HTTP에는 암호화 구조는 없지만 SSL이나 TSL이라는 다른 프로토콜을 조합함으로써 HTTP통신의 내용을 암호화 할수있다.
        - SSL등을 이용해 안전한 통신로를 확립하고나서 그 통신로를 사용해 HTTP통신을 합니다. SSL을 조합한 HTTP를 HTTPS또는 HTTP over SSL이라고 불린다.
    - 콘텐츠 암호화    
        - 콘텐츠 내용 자체를 암호화 하는것이다.
        - HTTP에 암호화 하는 기능이 없기 때문에 HTTP를 사용해서 운반하는 내용을 암호화 하는것이다.
        - 클라이언트에서 HTTP 메시지를 암호화해서 출력하는 처리가 필요하게 된다.
        - 콘텐츠의 암호화를 유효하게 하기 위해서는 클라이언트와 서버가 콘텐츠의 암,복호화구조를 가지고 있어야하므로 평상시에 유저가
         사용하는 브라우저와 웹 서버에서는 사용하기가 어렵다.
 
 ##통신 상태를 확인하지 않기 때문에 위장이 가능하다. 
 HTTP를 사용한 리퀘스트나 리스폰스에서는 통신 상대를 확인하지 않는다. 리퀘스트를 보낸 서버가 정말로 URI에서 지정된 호스트인지 아닌지,
 리스폰스를 반환한 클라이언트가 정말로 리퀘스트를 출력한 클라이언트인지를 모른다
 
 - 누구나 리퀘스트 할 수 있다.
 HTTP에 의한 통신에는 상대가 누구인지 확인하는 처리가 없다. 그래서 누구든지 리퀘스트를 보낼수가 있다.
 리퀘스트가 오면 상대가 누구든지 무언가의 리스폰스를 반환한다.(단 , IP주소나 포트등에서 그 웹서버에 액세스 제한이 없는 경우)
 
 HTTP는 누구이던 간에 리퀘스트를 보내면 리스폰스가 반환되는 매우 심플한 구조로 되어있다. 하지만 이것이 약점이다.
 - 리퀘스트를 보낸 곳의 웹 서버가 원래 의도한 리스폰스를 보내야하는 웹서버인지 아닌지를 확인할 수가 없다.
 - 리스폰스를 반환한 곳의 클라이언트가 원래 의도한 리퀘스트를 보낸 클라이언트인지 아닌지를 확인 할 수가 없다.
 - 통신하고 있는 상대가 접근이 허가된 상대인지 아닌지를 확인할 수 없다. 중요한 정보를 가진 웹서버에서는 특정
 상대만 통신을 허가하고 싶을때가 있다.
 - 어디의 누가 리퀘스트를 했는지 확인 할 수가 없다.
 - 의미없는 리퀘스트라도 수신하게 된다. 대량의 리퀘스트에 의한 DoS공격을 방지할 수가 없다.
 
 
 #### 상대를 확인하는 증명서
 HTTP에서는 통신 상대를 확인할 수 없지만 SSL로 상대를 확인할 수가 있다. SSL은 암호화뿐만이 아니라 상대를 확인하는 수단으로
 증명서를 제공하고 있다.
 증명서는 신뢰할 수 있는 제 3자 기관에서 의해 발행되는 것이기 때문에 서버나 클라이언트가 실재하는 사실을 증명합니다.
 또 그 증명서를 위조하는 것은 기술적으로 상당히 어렵다. 통신 상대의 서버나 클라이언트가 가진 증명서를 확인함으로써 통신 상대가
 내가 통신하고자 하는 상대인지 아닌지를 판단할 수 있다.
 이 증명서를 이용함으로써 통신 상대가 내가 통신하고자 하는 서버임을 나타내고 이용자는 개인 정보 누설등의 위험성이 줄어든다.
 또한, 클라이언트가 증명서를 가짐으로써 본인 확인을 하고 웹 사이트 인증에서 이용할 수도 있다.
 
 ##완정성을 증명할 수 없기 때문에 변조가 가능하다.
 완전성이란 정보의 정확성을 가리킵니다. 그것을 증명할 수 없다는 것은 정보가 정확한지 아닌지를 확일할 수 없음을 의미한다.
 
 - 수신한 내용이 다를수도 있다.
 